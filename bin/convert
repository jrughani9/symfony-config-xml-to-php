#!/usr/bin/env php
<?php

/*
 * This file is part of the gromnan/symfony-config-xml-to-php package.
 *
 * (c) Jérôme Tamarelle <jerome@tamarelle.net>
 *
 * For the full copyright and license information, please view the LICENSE
 * file that was distributed with this source code.
 */

use GromNaN\SymfonyConfigXmlToPhp\ConvertCommand;
use Symfony\Component\Console\Application;

$autoloaders = [
    __DIR__ . '/../../../autoload.php',
    __DIR__ . '/../vendor/autoload.php',
];

// Check if we're being run through Composer's bin proxy wrapper
// The proxy sets $_composer_autoload_path global variable pointing to the project's autoloader
if (isset($GLOBALS['_composer_autoload_path']) && file_exists($GLOBALS['_composer_autoload_path'])) {
    array_unshift($autoloaders, $GLOBALS['_composer_autoload_path']);
}

foreach ($autoloaders as $file) {
    if (file_exists($file)) {
        require $file;
        break;
    }
}

$console = new Application();
$console->add(new ConvertCommand());
$console->setDefaultCommand('convert', true);
$console->run();
